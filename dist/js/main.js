"use strict";var levels=document.querySelector("#levels"),bestPlayed=document.querySelector("#best"),levelCounter=1,sec=0,Enemy=function(e,t,n){this.x=e,this.y=t,this.speed=n,this.sprite="images/enemy-bug.png"};Enemy.prototype.update=function(e){this.x=this.x+this.speed*e,500<this.x&&(this.x=0),this.y+100>player.y&&this.y<player.y+40&&this.x+30>player.x&&this.x<player.x+20&&(player.y=400,player.x=200)},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(e,t){this.x=e,this.y=t,this.sprite="images/char-boy.png"};function start(){levelCounter++,levels.textContent=levelCounter}function played(){bestPlayed.textContent=levelCounter-1}function timer(e){return 9<e?e:"0"+e}Player.prototype.update=function(){this.y<=25&&(start(),played(),window.alert("well done"),this.reset(),sec=0,timer(),enemy1.speed=enemy1.speed+10,enemy2.speed=enemy2.speed+20,enemy3.speed=enemy3.speed+30)},Player.prototype.reset=function(){this.x=200,this.y=400},setInterval(function(){document.getElementById("seconds").innerHTML=timer(++sec%60),document.getElementById("minutes").innerHTML=timer(parseInt(sec/60,10))},1e3),Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var player=new Player(200,400);player.handleInput=function(e){"up"==e&&(this.y-=85,this.y<-20&&(this.y=-20)),"down"==e&&(this.y+=85,400<this.y&&(this.y=400)),"left"==e&&(this.x-=100,this.x<0&&(this.x=0)),"right"==e&&(this.x+=100,400<this.x&&(this.x=400))};var enemy1=new Enemy(50,55,200),enemy2=new Enemy(10,145,200),enemy3=new Enemy(300,230,200),allEnemies=[enemy1,enemy2,enemy3];document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var Engine=function(e){var n,t=e.document,s=e.window,i=t.createElement("canvas"),r=i.getContext("2d");function o(){var t,e=Date.now();t=(e-n)/1e3,allEnemies.forEach(function(e){e.update(t)}),player.update(),function(){var e,t,n=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"];for(r.clearRect(0,0,i.width,i.height),e=0;e<6;e++)for(t=0;t<5;t++)r.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),n=e,s.requestAnimationFrame(o)}i.width=505,i.height=606,t.body.appendChild(i),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(function(){n=Date.now(),o()}),e.ctx=r}(void 0);!function(){var n={},s=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,i()&&s.forEach(function(e){e()})},n[e]=!1,t.src=e}function i(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){s.push(e)},isReady:i}}();